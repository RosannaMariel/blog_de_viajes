{% extends 'base.html' %}
{% load static %}

{% block titulo %}
<title>Viajes</title>
{% endblock %}

{% block navegacion %}
{% include 'navegacion.html' %}
{% endblock %}

{% block contenido %}

<section class="timeline3 cid-tf4QbpyVP7" id="timeline3-o" style="padding: 2rem 0;">

    <!-- Buscador -->
    <form action="{% url 'apps.posts:listar_posts' %}" class="d-flex justify-content-center mb-3" role="search"
        method="get">
        <input class="form-control me-2" type="search" placeholder="Buscar posts" aria-label="Search" name="buscador"
            style="max-width: 400px;">
        <button class="btn btn-primary" type="submit">Buscar</button>
    </form>

    <!-- Botones de orden -->
    <!-- Botones de orden -->
    <div class="d-flex justify-content-center mb-4 gap-2">
        <a href="{% url 'apps.posts:ordenar_por' %}?orden={% if orden_actual == 'fecha_asc' %}fecha_desc{% else %}fecha_asc{% endif %}"
            class="btn btn-outline-primary {% if 'fecha' in orden_actual %}active{% endif %}">
            Ordenar por Fecha
        </a>
        <a href="{% url 'apps.posts:ordenar_por' %}?orden={% if orden_actual == 'titulo_asc' %}titulo_desc{% else %}titulo_asc{% endif %}"
            class="btn btn-outline-primary {% if 'titulo' in orden_actual %}active{% endif %}">
            Ordenar por Título
        </a>
    </div>

    {% if posts %}
    <div class="container">
        <h3 class="text-center mb-4"><strong>Viajes</strong></h3>
        <div class="row g-4">
            {% for p in posts %}
            <div class="col-md-4">
                <div class="card h-100 text-center shadow-sm" style="border-radius: 12px;">

                    <!-- Imagen con tamaño uniforme -->
                    <div style="overflow: hidden; height: 200px;">
                        <img src="{{ p.imagen.url }}" alt="{{ p.titulo }}"
                            style="width: 100%; height: 100%; object-fit: cover;">
                    </div>

                    <div class="card-body">
                        <h5 class="card-title">{{ p.titulo }}</h5>
                        <p class="text-muted mb-2"><small>{{ p.fecha_agregado|date:"d M Y" }}</small></p>
                        <p class="card-text mb-1"><strong>{{ p.region }}, {{ p.pais }}</strong></p>
                        <p class="card-text">Categoria: {{ p.categoria }}</p>
                        <a href="{% url 'apps.posts:post' p.id %}" class="btn btn-primary btn-sm mt-2">Leer más</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    {% include 'paginador.html' %}
</section>

{% endblock %}